{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport axios from \"axios\";\nimport { ref } from 'vue';\nexport default {\n  setup() {\n    //定义表单数据\n    const sex = ref('');\n    //定义验证规则\n    const rules = {\n      sex: [{\n        required: true,\n        message: '请选择性别',\n        trigger: 'change'\n      }] //必须填写\n    };\n\n    // 定义验证错误信息\n    const genderErrorMessage = ref('');\n\n    // 定义验证方法\n    const validate = field => {\n      const result = validateField(field);\n      if (result === true) {\n        setErrorMessage(field, '');\n      } else {\n        setErrorMessage(field, result.message);\n      }\n    };\n\n    // 验证单个字段\n    const validateField = field => {\n      const value = eval(field);\n      const fieldRules = rules[field];\n      for (let i = 0; i < fieldRules.length; i++) {\n        const rule = fieldRules[i];\n        if (rule.required && !value) {\n          return rule;\n        }\n      }\n      return true;\n    };\n\n    // 设置错误信息\n    const setErrorMessage = (field, message) => {\n      const errorMessageRef = eval(`${field}ErrorMessage`);\n      errorMessageRef.value = message;\n    };\n    return {\n      sex,\n      rules,\n      genderErrorMessage,\n      validate\n    };\n  },\n  data() {\n    return {\n      formData: {\n        name: '',\n        age: '',\n        sex: '',\n        marriage: '',\n        id: '',\n        phone: ''\n      }\n    };\n  },\n  methods: {\n    submitForm() {\n      if (this.$validator.validateAll()) {\n        axios.post('http://127.0.0.1:8000/api/addp', this.formData).then(response => {\n          console.log(response.data);\n          this.$router.push('/choose');\n          alert(\"预约成功！\");\n        }).catch(error => {\n          console.log(error);\n        });\n      } else {\n        alert(\"请将信息填写完整\");\n      }\n    }\n\n    // check(){\n    //    //检查身份证\n    //    var id = document.getElementById('idnumber');\n    //    if(!id){\n    //          alert(\"请输入有效合法的身份证号码！\");\n    //          return false;\n    //    }\n    //    if(id.length<18){\n    //       alert(\"请输入有效合法的身份证号码！\");\n    //       return false;\n    //    }\n    //    let len = 17;\n    //    let sum = 0;\n    //    let yzArray = [7,9,10,5,8,4,2,1,6,3,7,9,10,5,8,4,2];\n    //    let codeArray = ['1','0','X','9','8','7','6','5','4','3','2'];\n    //    for(let i=0;i<len;i++){\n    //       sum+=id[i]*yzArray[i];\n    //    }\n    //    let mod = sum%11;\n    //    if( codeArray[mod]==id[17] ){\n    //       alert(\"有效合法的身份证号码！\");\n    //       return true;\n    //    }\n    //    else return false;\n    //    //检查姓名\n\n    //    //检查手机号\n    // },\n  }\n};","map":{"version":3,"mappings":";AAmDA,OAAOA,KAAI,MAAO,OAAO;AACzB,SAASC,GAAE,QAAS,KAAK;AACtB,eAAe;EACZC,KAAK,GAAG;IACN;IACA,MAAMC,GAAE,GAAIF,GAAG,CAAC,EAAE,CAAC;IACnB;IACA,MAAMG,KAAI,GAAI;MACZD,GAAG,EAAE,CACH;QAACE,QAAQ,EAAE,IAAI;QAAEC,OAAO,EAAC,OAAO;QAACC,OAAO,EAAE;MAAQ,EACnD;IACH,CAAC;;IAED;IACA,MAAMC,kBAAiB,GAAIP,GAAG,CAAC,EAAE,CAAC;;IAElC;IACA,MAAMQ,QAAO,GAAIC,KAAI,IAAK;MACxB,MAAMC,MAAK,GAAIC,aAAa,CAACF,KAAK,CAAC;MACnC,IAAIC,MAAK,KAAM,IAAI,EAAE;QACnBE,eAAe,CAACH,KAAK,EAAE,EAAE,CAAC;MAC5B,OAAO;QACLG,eAAe,CAACH,KAAK,EAAEC,MAAM,CAACL,OAAO,CAAC;MACxC;IACF,CAAC;;IAED;IACA,MAAMM,aAAY,GAAIF,KAAI,IAAK;MAC7B,MAAMI,KAAI,GAAIC,IAAI,CAACL,KAAK,CAAC;MACzB,MAAMM,UAAS,GAAIZ,KAAK,CAACM,KAAK,CAAC;MAC/B,KAAK,IAAIO,IAAI,CAAC,EAAEA,IAAID,UAAU,CAACE,MAAM,EAAED,CAAC,EAAE,EAAE;QAC1C,MAAME,IAAG,GAAIH,UAAU,CAACC,CAAC,CAAC;QAC1B,IAAIE,IAAI,CAACd,QAAO,IAAK,CAACS,KAAK,EAAE;UAC3B,OAAOK,IAAI;QACb;MACF;MACA,OAAO,IAAI;IACb,CAAC;;IAED;IACA,MAAMN,eAAc,GAAI,CAACH,KAAK,EAAEJ,OAAO,KAAK;MAC1C,MAAMc,eAAc,GAAIL,IAAI,CAAE,GAAEL,KAAM,cAAa,CAAC;MACpDU,eAAe,CAACN,KAAI,GAAIR,OAAO;IACjC;IAEA,OAAO;MACLH,GAAG;MACHC,KAAK;MACLI,kBAAkB;MAClBC;IACF,CAAC;EACH,CAAC;EACDY,IAAI,GAAG;IACL,OAAO;MACLC,QAAQ,EAAE;QACRC,IAAI,EAAE,EAAE;QACRC,GAAG,EAAE,EAAE;QACPrB,GAAG,EAAE,EAAE;QACPsB,QAAQ,EAAE,EAAE;QACZC,EAAE,EAAE,EAAE;QACNC,KAAK,EAAE;MACT;IACF;EACF,CAAC;EACDC,OAAM,EAAG;IACNC,UAAU,GAAG;MACZ,IAAG,IAAI,CAACC,UAAU,CAACC,WAAW,EAAE,EAAC;QAC/B/B,KAAK,CAACgC,IAAI,CAAC,gCAAgC,EAAE,IAAI,CAACV,QAAQ,EACzDW,IAAI,CAACC,QAAO,IAAK;UAChBC,OAAO,CAACC,GAAG,CAACF,QAAQ,CAACb,IAAI,CAAC;UAC1B,IAAI,CAACgB,OAAO,CAACC,IAAI,CAAC,SAAS,CAAC;UAC5BC,KAAK,CAAC,OAAO;QACf,CAAC,EACAC,KAAK,CAACC,KAAI,IAAK;UACdN,OAAO,CAACC,GAAG,CAACK,KAAK,CAAC;QACpB,CAAC,CAAC;MACJ,OACI;QACFF,KAAK,CAAC,UAAU;MAClB;IACF;;IAEC;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;;IAEA;IACA;EACH;AACN","names":["axios","ref","setup","sex","rules","required","message","trigger","genderErrorMessage","validate","field","result","validateField","setErrorMessage","value","eval","fieldRules","i","length","rule","errorMessageRef","data","formData","name","age","marriage","id","phone","methods","submitForm","$validator","validateAll","post","then","response","console","log","$router","push","alert","catch","error"],"sourceRoot":"","sources":["D:\\github_local\\Physical-Examination-System\\test\\src\\pages\\WriteInfor\\MyIndex.vue"],"sourcesContent":["\r\n<template>\r\n<html>\r\n <head>\r\n  <meta charset=\"utf-8\">\r\n  <title>信息登记表</title>\r\n </head>\r\n <body>\r\n  <div class=\"bg\">\r\n   <form method=\"post\" autocomplete=\"off\">\r\n    <p align=\"center\" class=\"title\"><h2>信息登记表</h2></p>\r\n    <div class=\"wenben\">\r\n      <form class=\"inner\" @submit.prevent=\"submitForm\"><br />\r\n        <p align=\"center\" class=\"font\">真实姓名: <input type=\"text\" v-model=\"formData.name\" required></p>\r\n        <p align=\"center\" class=\"font\">你的年龄: <input type=\"text\" v-model=\"formData.age\" required></p>\r\n        <p align=\"center\" class=\"font\">你的性别: &emsp;  &emsp;  &emsp;  \r\n          <label>\r\n          <input type=\"radio\" name=\"sex\" value=\"男\" v-model=\"formData.sex\" @change=\"validate('sex')\">\r\n          男\r\n        </label>\r\n        &emsp;  &emsp;  &emsp;  &emsp;  &emsp;  &emsp;  \r\n        <label>\r\n          <input type=\"radio\" name=\"sex\" value=\"女\" v-model=\"formData.sex\" @change=\"validate('sex')\">\r\n          女\r\n        </label>\r\n        <span v-if=\"genderErrorMessage\" class=\"error\">{{ genderErrorMessage }}</span>\r\n        </p>\r\n        <p align=\"center\" class=\"font\">是否已婚: &emsp;  &emsp;  &ensp;  \r\n          <label>\r\n          <input type=\"radio\" value=\"已婚\" v-model=\"formData.marriage\">\r\n          已婚\r\n        </label>\r\n        &emsp;  &emsp;  &emsp;  &emsp;  &emsp;  \r\n        <label>\r\n          <input type=\"radio\" value=\"未婚\" v-model=\"formData.marriage\">\r\n          未婚\r\n        </label>\r\n        </p>\r\n        <p align=\"center\" class=\"font\">身份证号: <input type=\"text\" v-model=\"formData.id\" required></p>\r\n        <p align=\"center\" class=\"font\">手机号码: <input type=\"text\" v-model=\"formData.phone\" required></p>\r\n        <p align=\"center\"><button type=\"submit\" class=\"but\">提交预约信息</button></p>\r\n      </form>\r\n    </div>\r\n   </form>\r\n  </div>\r\n </body>\r\n</html>\r\n\r\n</template>\r\n  \r\n<script>\r\nimport axios from \"axios\";\r\nimport { ref } from 'vue';\r\n   export default {\r\n      setup() {\r\n        //定义表单数据\r\n        const sex = ref('');\r\n        //定义验证规则\r\n        const rules = {\r\n          sex: [\r\n            {required: true, message:'请选择性别',trigger: 'change'}\r\n          ]//必须填写\r\n        };\r\n\r\n        // 定义验证错误信息\r\n        const genderErrorMessage = ref('');\r\n\r\n        // 定义验证方法\r\n        const validate = field => {\r\n          const result = validateField(field);\r\n          if (result === true) {\r\n            setErrorMessage(field, '');\r\n          } else {\r\n            setErrorMessage(field, result.message);\r\n          }\r\n        };\r\n\r\n        // 验证单个字段\r\n        const validateField = field => {\r\n          const value = eval(field);\r\n          const fieldRules = rules[field];\r\n          for (let i = 0; i < fieldRules.length; i++) {\r\n            const rule = fieldRules[i];\r\n            if (rule.required && !value) {\r\n              return rule;\r\n            }\r\n          }\r\n          return true;\r\n        };\r\n\r\n        // 设置错误信息\r\n        const setErrorMessage = (field, message) => {\r\n          const errorMessageRef = eval(`${field}ErrorMessage`);\r\n          errorMessageRef.value = message;\r\n        }\r\n\r\n        return {\r\n          sex,\r\n          rules,\r\n          genderErrorMessage,\r\n          validate\r\n        };\r\n      },\r\n      data() {\r\n        return {\r\n          formData: {\r\n            name: '',\r\n            age: '',\r\n            sex: '',\r\n            marriage: '',\r\n            id: '',\r\n            phone: ''\r\n          }\r\n        }\r\n      },\r\n      methods :{\r\n         submitForm() {\r\n          if(this.$validator.validateAll()){\r\n            axios.post('http://127.0.0.1:8000/api/addp', this.formData)\r\n            .then(response => {\r\n              console.log(response.data);\r\n              this.$router.push('/choose');\r\n              alert(\"预约成功！\")\r\n            })\r\n            .catch(error => {\r\n              console.log(error);\r\n            });\r\n          }\r\n          else{\r\n            alert(\"请将信息填写完整\")\r\n          }\r\n        }\r\n\r\n         // check(){\r\n         //    //检查身份证\r\n         //    var id = document.getElementById('idnumber');\r\n         //    if(!id){\r\n         //          alert(\"请输入有效合法的身份证号码！\");\r\n         //          return false;\r\n         //    }\r\n         //    if(id.length<18){\r\n         //       alert(\"请输入有效合法的身份证号码！\");\r\n         //       return false;\r\n         //    }\r\n         //    let len = 17;\r\n         //    let sum = 0;\r\n         //    let yzArray = [7,9,10,5,8,4,2,1,6,3,7,9,10,5,8,4,2];\r\n         //    let codeArray = ['1','0','X','9','8','7','6','5','4','3','2'];\r\n         //    for(let i=0;i<len;i++){\r\n         //       sum+=id[i]*yzArray[i];\r\n         //    }\r\n         //    let mod = sum%11;\r\n         //    if( codeArray[mod]==id[17] ){\r\n         //       alert(\"有效合法的身份证号码！\");\r\n         //       return true;\r\n         //    }\r\n         //    else return false;\r\n         //    //检查姓名\r\n\r\n         //    //检查手机号\r\n         // },\r\n      }\r\n}\r\n</script>\r\n  \r\n<style scoped lang=\"less\">\r\n   div.wenben {\r\n    width: 600px;\r\n    margin: auto;\r\n    height: 576px;\r\n    background-color: #b5bfc2c7;\r\n   }\r\n   form {\r\n    height: 750px;\r\n    border-style:solid;\r\n    border-width:4px;\r\n    border-color: aliceblue;\r\n    background-color: #48576a;\r\n    .inner{\r\n      background-color: #e3eaf1;\r\n      height: 570px;\r\n    }\r\n   }\r\n   input {\r\n    width:320px;\r\n    height:35px;                                 \r\n    border:1px solid #d4cdba;\r\n    padding:2px; \r\n    font-size: 17px;\r\n   }\r\n   input[type=\"radio\"] {\r\n      width:30px;\r\n      height:25px; \r\n   }\r\n   input:hover{\r\n\t\t\t\tcolor: aliceblue;\r\n\t\t\t\tbackground-color: #48576a;\r\n\t\t\t}\r\n   h2 {\r\n      font-size: 50px;\r\n      color: #e3eaf1; \r\n      display : inline;\r\n      \r\n      padding-bottom: 20px;\r\n   }\r\n   p {\r\n      height: 80px;\r\n   }\r\n   .font {\r\n      font-weight: 900;\r\n      font-size: large;\r\n   }\r\n   .title{\r\n    background-color: #48576a;\r\n   }\r\n\r\n   .but {\r\n    background-color: #48576a; \r\n    border: none;\r\n    color: white;\r\n    padding: 15px 32px;\r\n    text-align: center;\r\n    text-decoration: none;\r\n    font-size: 25px;\r\n    border-radius: 10%;\r\n    cursor: pointer;//悬浮时变手指\r\n}\r\n\r\n</style>"]},"metadata":{},"sourceType":"module","externalDependencies":[]}