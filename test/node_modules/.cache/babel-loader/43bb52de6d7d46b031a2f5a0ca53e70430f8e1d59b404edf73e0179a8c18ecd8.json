{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport axios from \"axios\";\nexport default {\n  data() {\n    return {\n      formData: {\n        name: '',\n        age: '',\n        sex: '',\n        marriage: '',\n        id: '',\n        phone: ''\n      },\n      idvalid: true,\n      phonevalid: true\n    };\n  },\n  methods: {\n    submitForm() {\n      if (this.formData.sex == '') {\n        alert(\"请选择性别！\");\n      } else if (this.formData.marriage == '') {\n        alert(\"请选择是否已婚！\");\n      } else if (!this.idvalid) {\n        alert(\"请输入正确的身份证号码\");\n      } else {\n        axios.post('http://127.0.0.1:8000/api/addp', this.formData).then(response => {\n          if (response.data.msg == 'success') {\n            console.log(response.data);\n            this.$router.push('/choose');\n            alert(\"预约成功！\");\n          } else if (response.data.error_num == 1) {\n            alert(\"不存在这样一个人，请填写你的真实姓名\");\n          }\n        }).catch(error => {\n          console.log(error);\n        });\n      }\n    },\n    validateIDNumber(idNumber) {\n      if (idNumber.length !== 18) {\n        //长度是否为18位\n        return false;\n      }\n      if (!/^\\d{17}[\\dX]$/.test(idNumber)) {\n        //前17位是否都是数字\n        return false;\n      }\n      //计算校验位是否正确\n      const weights = [7, 9, 10, 5, 8, 4, 2, 1, 6, 3, 7, 9, 10, 5, 8, 4, 2];\n      const factors = idNumber.slice(0, 17).split('').map(Number);\n      const checkSum = factors.reduce((sum, factor, index) => sum + factor * weights[index], 0) % 11;\n      const checkDigit = {\n        0: 1,\n        1: 0,\n        2: 'X',\n        3: 9,\n        4: 8,\n        5: 7,\n        6: 6,\n        7: 5,\n        8: 4,\n        9: 3,\n        10: 2\n      }[checkSum];\n      return idNumber[17] === checkDigit.toString();\n    },\n    validateIdNumber() {\n      this.idvalid = this.validateIDNumber(this.formData.id);\n    }\n  }\n};","map":{"version":3,"mappings":"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","names":["axios","data","formData","name","age","sex","marriage","id","phone","idvalid","phonevalid","methods","submitForm","alert","post","then","response","msg","console","log","$router","push","error_num","catch","error","validateIDNumber","idNumber","length","test","weights","factors","slice","split","map","Number","checkSum","reduce","sum","factor","index","checkDigit","toString","validateIdNumber"],"sourceRoot":"","sources":["D:\\github_local\\Physical-Examination-System\\test\\src\\pages\\WriteInfor\\MyIndex.vue"],"sourcesContent":["\r\n<template>\r\n<html>\r\n <head>\r\n  <meta charset=\"utf-8\">\r\n  <title>信息登记表</title>\r\n </head>\r\n <body>\r\n  <div class=\"bg\">\r\n   <form method=\"post\" autocomplete=\"off\">\r\n    <p align=\"center\" class=\"title\"><h2>信息登记表</h2></p>\r\n    <div class=\"wenben\">\r\n      <form class=\"inner\" @submit.prevent=\"submitForm\"><br />\r\n        <p align=\"center\" class=\"font\">真实姓名: <input type=\"text\" v-model=\"formData.name\" required></p>\r\n        <p align=\"center\" class=\"font\">你的年龄: <input type=\"number\" v-model=\"formData.age\" min=\"0\" max=\"120\" required></p>\r\n        <p align=\"center\" class=\"font\">你的性别: &emsp;  &emsp;  &emsp;  \r\n          <label>\r\n          <input type=\"radio\" value=\"男\" v-model=\"formData.sex\">\r\n          男\r\n        </label>\r\n        &emsp;  &emsp;  &emsp;  &emsp;  &emsp;  &emsp;  \r\n        <label>\r\n          <input type=\"radio\" value=\"女\" v-model=\"formData.sex\">\r\n          女\r\n        </label>\r\n        </p>\r\n        <p align=\"center\" class=\"font\">是否已婚: &emsp;  &emsp;  &ensp;  \r\n          <label>\r\n          <input type=\"radio\" value=\"已婚\" v-model=\"formData.marriage\">\r\n          已婚\r\n        </label>\r\n        &emsp;  &emsp;  &emsp;  &emsp;  &emsp;  \r\n        <label>\r\n          <input type=\"radio\" value=\"未婚\" v-model=\"formData.marriage\">\r\n          未婚\r\n        </label>\r\n        </p>\r\n        <p align=\"center\" class=\"font\">身份证号: <input type=\"text\" v-model=\"formData.id\" @blur=\"validateIdNumber\" required></p>\r\n        <p align=\"center\" class=\"font\">手机号码: <input type=\"text\" v-model=\"formData.phone\" required></p>\r\n        <p align=\"center\"><button type=\"submit\" class=\"but\">提交预约信息</button></p>\r\n      </form>\r\n    </div>\r\n   </form>\r\n  </div>\r\n </body>\r\n</html>\r\n\r\n</template>\r\n  \r\n<script>\r\nimport axios from \"axios\";\r\n   export default {\r\n      data() {\r\n        return {\r\n          formData: {\r\n            name: '',\r\n            age: '',\r\n            sex: '',\r\n            marriage: '',\r\n            id: '',\r\n            phone: ''\r\n          },\r\n          idvalid: true,\r\n          phonevalid: true,\r\n        }\r\n      },\r\n      methods :{\r\n         submitForm() {\r\n          if(this.formData.sex==''){\r\n            alert(\"请选择性别！\")\r\n          }\r\n          else if(this.formData.marriage==''){\r\n            alert(\"请选择是否已婚！\")\r\n          }\r\n          else if(!this.idvalid){\r\n            alert(\"请输入正确的身份证号码\")\r\n          }\r\n          else{\r\n            axios.post('http://127.0.0.1:8000/api/addp', this.formData)\r\n            .then((response) => {\r\n              if(response.data.msg=='success'){\r\n                console.log(response.data);\r\n                this.$router.push('/choose');\r\n                alert(\"预约成功！\")\r\n              }\r\n              else if(response.data.error_num==1){\r\n                alert(\"不存在这样一个人，请填写你的真实姓名\")\r\n              }\r\n            })\r\n            .catch(error => {\r\n              console.log(error);\r\n            });\r\n          }\r\n        },\r\n\r\n        validateIDNumber(idNumber) {\r\n          if (idNumber.length !== 18) {//长度是否为18位\r\n            return false;\r\n          }\r\n          if (!/^\\d{17}[\\dX]$/.test(idNumber)) {//前17位是否都是数字\r\n            return false;\r\n          }\r\n          //计算校验位是否正确\r\n          const weights = [7, 9, 10, 5, 8, 4, 2, 1, 6, 3, 7, 9, 10, 5, 8, 4, 2];\r\n          const factors = idNumber.slice(0, 17).split('').map(Number);\r\n          const checkSum = factors.reduce((sum, factor, index) => sum + factor * weights[index], 0) % 11;\r\n          const checkDigit = { 0: 1, 1: 0, 2: 'X', 3: 9, 4: 8, 5: 7, 6: 6, 7: 5, 8: 4, 9: 3, 10: 2 }[checkSum];\r\n          return idNumber[17] === checkDigit.toString();\r\n        },\r\n\r\n        validateIdNumber() {\r\n          this.idvalid = this.validateIDNumber(this.formData.id);\r\n        },\r\n\r\n\r\n      }\r\n}\r\n</script>\r\n  \r\n<style scoped lang=\"less\">\r\n   div.wenben {\r\n    width: 600px;\r\n    margin: auto;\r\n    height: 576px;\r\n    background-color: #b5bfc2c7;\r\n   }\r\n   form {\r\n    height: 750px;\r\n    border-style:solid;\r\n    border-width:4px;\r\n    border-color: aliceblue;\r\n    background-color: #48576a;\r\n    .inner{\r\n      background-color: #e3eaf1;\r\n      height: 570px;\r\n    }\r\n   }\r\n   input {\r\n    width:320px;\r\n    height:35px;                                 \r\n    border:1px solid #d4cdba;\r\n    padding:2px; \r\n    font-size: 17px;\r\n   }\r\n   input[type=\"radio\"] {\r\n      width:30px;\r\n      height:25px; \r\n   }\r\n   input:hover{\r\n\t\t\t\tcolor: aliceblue;\r\n\t\t\t\tbackground-color: #48576a;\r\n\t\t\t}\r\n   h2 {\r\n      font-size: 50px;\r\n      color: #e3eaf1; \r\n      display : inline;\r\n      \r\n      padding-bottom: 20px;\r\n   }\r\n   p {\r\n      height: 80px;\r\n   }\r\n   .font {\r\n      font-weight: 900;\r\n      font-size: large;\r\n   }\r\n   .title{\r\n    background-color: #48576a;\r\n   }\r\n\r\n   .but {\r\n    background-color: #48576a; \r\n    border: none;\r\n    color: white;\r\n    padding: 15px 32px;\r\n    text-align: center;\r\n    text-decoration: none;\r\n    font-size: 25px;\r\n    border-radius: 10%;\r\n    cursor: pointer;//悬浮时变手指\r\n}\r\n\r\n</style>"]},"metadata":{},"sourceType":"module","externalDependencies":[]}